todo
	add index cinema_vista_configuration
		SELECT cvc.vista_service_url FROM cinema_vista_configuration cvc , cinemas where cinemas.display_name = 'Sathyam'
            AND cinemas.id = cvc.cinema_id

    move groupby logic to server ?
    	SELECT s.id, s.start_time, m.language, s.show_number, s.movie_name,  
            s.screen_name, s.cinema_name, s.slugged_movie_name, s.session_status, m.certification,  
            string_agg(distinct(se.experience), ',') AS experiences,  
            c.display_name  AS cinema_display_name  
            FROM sessions s   
            LEFT OUTER JOIN movies m ON s.movie_name = m.name and m.name = s.movie_name  
            LEFT OUTER JOIN session_experiences se ON se.session_id = s.id  
            INNER JOIN cinemas c ON s.cinema_name = c.name  
            where s.id = 'LUXE1285'
            AND  se.active = 'true' GROUP BY s.id, s.start_time, m.language, s.show_number, s.movie_name, 
             s.screen_name, s.cinema_name, s.slugged_movie_name, c.display_name, m.certification
	
	cost too high
		SELECT count(*) FROM orders where date(created_at) = CURRENT_DATE and customer_email = ('') and status  in ('NEW','IN_PROGRESS', 'SEAT_SELECTED', 'FOOD_SELECTED', 'PAY_STARTED'    


        Aggregate  (cost=70546.53..70546.54 rows=1 width=0)
   ->  Index Scan using order_created_at_and_customer_email_index on orders  (cost=0.55..70546.53 rows=1 width=0)
         Index Cond: ((customer_email)::text = 'twsathyam@gmail.com'::text)
         Filter: (((status)::text = ANY ('{NEW,IN_PROGRESS,SEAT_SELECTED,FOOD_SELECTED,PAY_STARTED}'::text[])) AND (date(created_at) = ('now'::
cstring)::date))

	order
		indices added to improv
			add
				customer_email_index hash // not btree
			removed 
				created_at + email 

		purge/migrate old orders to other db ?

		cost of insert after new index
			explain INSERT INTO orders (id,status,created_at, updated_at,customer_email, mobile_number, movie_name,cinema_display_name,screen_name, 
             seat_category,experience,terms_conditions,banyan,vista_transaction_id, 
             three_d_charges, ticket_service_charge, seat_selection_charge, food_service_charge,  
             seats, seat_category_price, booking_code, movie_time, payment_gateway, language, user_session_id,  
             banyan_charge,city_name,movie_certification,vista_txn_time, show_number, vendor_txn_id, source)  
            VALUES('3',  
                   ':status',  
                   to_timestamp(':createdAt', 'YYYY-MM-DD HH24:MI:SS'),  
                   to_timestamp(':updatedAt', 'YYYY-MM-DD HH24:MI:SS'),  
                   ':ce', ':m', ':vn', ':c', ':c', 
                   ':c', ':e', true, true, ':3', 
                   3, 34, 34, 34,  
                   4, 3, ':c', to_timestamp('3', 'YYYY-MM-DD HH24:MI:SS'),  
                   'd', 'd','d', 5,'d','d', 
                   to_timestamp('d', 'YYYY-MM-DD HH24:MI:SS'), 5, 'd', 'e')            

    try for 10000+ users over 300s




done